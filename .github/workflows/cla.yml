name: "CLA Assistant"

on:
  issue_comment:
    types: [created]
  pull_request_target:
    types: [opened, synchronize, reopened]

permissions:
  contents: write      # to commit signatures
  pull-requests: write # to comment on PRs
  statuses: write      # to set commit status (green/red check)

jobs:
  cla:
    runs-on: ubuntu-latest
    steps:
      - name: "CLA Assistant"
        uses: contributor-assistant/github-action@v2.4.1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          # Store signatures locally in this repository (this is the safe default)
          path-to-signatures: "signatures/version1/cla.json"

          # Your own CLA document (create CLA.md in repo root if you donâ€™t have one yet)
          path-to-document: "https://github.com/Pray4Lovee/Grants-Program/blob/main/CLA.md"

          # Branch where the signatures file lives
          branch: "main"

          # Users/bots that never need to sign
          allowlist: Pray4Lovee,github-actions[bot],dependabot[bot],dependabot-preview[bot]

          # Friendly messages
          custom-notsigned-prcomment: |
            Thank you for your submission!  
            Before we can review it, please sign our Contributor License Agreement by adding a new comment with exactly this text:

            `I have read and agree to the CLA`

          custom-pr-sign-comment: "I have read and agree to the CLA"

          # Optional: lock PR after merge to prevent reuse
          lock-pullrequest-aftermerge: true
